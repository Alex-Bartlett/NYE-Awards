import{s as K,D as U,E as L,i as I,n as V,f as v,p as pe,e as b,a as E,t as M,c as k,b as y,g as w,d as Q,l as m,h as _,o as W,j as X,F as ae,m as j}from"../chunks/scheduler.256b6e1f.js";import{S as Z,i as ee,b as O,d as ge,t as z,g as ve,c as ne,a as se,m as re,e as ce}from"../chunks/index.6f54c819.js";import{e as J}from"../chunks/each.fb95c91e.js";import{g as be}from"../chunks/navigation.c4a97ad3.js";function ue(s,e,l){const t=s.slice();return t[6]=e[l],t}function fe(s){let e,l,t,i,a,o,d,r,n=s[6].name+"",c,f,p,g,x;return{c(){e=b("div"),l=b("input"),d=E(),r=b("label"),c=M(n),p=E(),this.h()},l(h){e=k(h,"DIV",{});var u=y(e);l=k(u,"INPUT",{type:!0,id:!0,name:!0}),d=w(u),r=k(u,"LABEL",{for:!0});var D=y(r);c=Q(D,n),D.forEach(v),p=w(u),u.forEach(v),this.h()},h(){m(l,"type","checkbox"),m(l,"id",t=`category-${s[6].id}`),l.value=i=s[6].id,m(l,"name",a=s[6].name),l.checked=o=s[6].active,m(r,"for",f=`category-${s[6].id}`)},m(h,u){I(h,e,u),_(e,l),_(e,d),_(e,r),_(r,c),_(e,p),g||(x=W(l,"change",s[1]),g=!0)},p(h,u){u&1&&t!==(t=`category-${h[6].id}`)&&m(l,"id",t),u&1&&i!==(i=h[6].id)&&(l.value=i),u&1&&a!==(a=h[6].name)&&m(l,"name",a),u&1&&o!==(o=h[6].active)&&(l.checked=o),u&1&&n!==(n=h[6].name+"")&&X(c,n),u&1&&f!==(f=`category-${h[6].id}`)&&m(r,"for",f)},d(h){h&&v(e),g=!1,x()}}}function ke(s){let e,l=J(s[0]),t=[];for(let i=0;i<l.length;i+=1)t[i]=fe(ue(s,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=L()},l(i){for(let a=0;a<t.length;a+=1)t[a].l(i);e=L()},m(i,a){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(i,a);I(i,e,a)},p(i,[a]){if(a&3){l=J(i[0]);let o;for(o=0;o<l.length;o+=1){const d=ue(i,l,o);t[o]?t[o].p(d,a):(t[o]=fe(d),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:V,o:V,d(i){i&&v(e),pe(t,i)}}}function Ce(s,e,l){let{categories:t}=e,{quote:i}=e,{activeCategories:a}=e;function o(n,c){let f=n;c.categories.forEach(p=>{f.forEach(g=>{g.id==p.id&&(g.active=!0)})}),l(0,a=f)}function d(n){for(let c in a)if(a[c].id==n)return c;return-1}function r(n){const c=n.target.checked,f=n.target.value,p=d(f);p>=0&&l(0,a[p].active=c,a)}return s.$$set=n=>{"categories"in n&&l(2,t=n.categories),"quote"in n&&l(3,i=n.quote),"activeCategories"in n&&l(0,a=n.activeCategories)},s.$$.update=()=>{s.$$.dirty&12&&o(t,i)},[a,r,t,i]}class qe extends Z{constructor(e){super(),ee(this,e,Ce,ke,K,{categories:2,quote:3,activeCategories:0})}get categories(){return this.$$.ctx[2]}set categories(e){this.$$set({categories:e}),U()}get quote(){return this.$$.ctx[3]}set quote(e){this.$$set({quote:e}),U()}get activeCategories(){return this.$$.ctx[0]}set activeCategories(e){this.$$set({activeCategories:e}),U()}}function he(s,e,l){const t=s.slice();return t[6]=e[l],t}function de(s){let e,l,t,i,a,o,d,r,n=s[6].name[0].toUpperCase()+s[6].name.substr(1)+"",c,f,p,g,x;return{c(){e=b("div"),l=b("input"),d=E(),r=b("label"),c=M(n),p=E(),this.h()},l(h){e=k(h,"DIV",{});var u=y(e);l=k(u,"INPUT",{type:!0,id:!0,name:!0}),d=w(u),r=k(u,"LABEL",{for:!0});var D=y(r);c=Q(D,n),D.forEach(v),p=w(u),u.forEach(v),this.h()},h(){m(l,"type","checkbox"),m(l,"id",t=`person-${s[6].id}`),l.value=i=s[6].id,m(l,"name",a=s[6].name),l.checked=o=s[6].active,m(r,"for",f=`person-${s[6].id}`)},m(h,u){I(h,e,u),_(e,l),_(e,d),_(e,r),_(r,c),_(e,p),g||(x=W(l,"change",s[1]),g=!0)},p(h,u){u&1&&t!==(t=`person-${h[6].id}`)&&m(l,"id",t),u&1&&i!==(i=h[6].id)&&(l.value=i),u&1&&a!==(a=h[6].name)&&m(l,"name",a),u&1&&o!==(o=h[6].active)&&(l.checked=o),u&1&&n!==(n=h[6].name[0].toUpperCase()+h[6].name.substr(1)+"")&&X(c,n),u&1&&f!==(f=`person-${h[6].id}`)&&m(r,"for",f)},d(h){h&&v(e),g=!1,x()}}}function ye(s){let e,l=J(s[0]),t=[];for(let i=0;i<l.length;i+=1)t[i]=de(he(s,l,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=L()},l(i){for(let a=0;a<t.length;a+=1)t[a].l(i);e=L()},m(i,a){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(i,a);I(i,e,a)},p(i,[a]){if(a&3){l=J(i[0]);let o;for(o=0;o<l.length;o+=1){const d=he(i,l,o);t[o]?t[o].p(d,a):(t[o]=de(d),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:V,o:V,d(i){i&&v(e),pe(t,i)}}}function Ee(s,e,l){let{people:t}=e,{quote:i}=e,{activePeople:a}=e;function o(n,c){let f=n;c.people.forEach(p=>{f.forEach(g=>{g.id==p.id&&(g.active=!0)})}),l(0,a=f)}function d(n){for(let c in a)if(a[c].id==n)return c;return-1}function r(n){const c=n.target.checked,f=n.target.value,p=d(f);p>=0&&l(0,a[p].active=c,a)}return s.$$set=n=>{"people"in n&&l(2,t=n.people),"quote"in n&&l(3,i=n.quote),"activePeople"in n&&l(0,a=n.activePeople)},s.$$.update=()=>{s.$$.dirty&12&&o(t,i)},[a,r,t,i]}class we extends Z{constructor(e){super(),ee(this,e,Ee,ye,K,{people:2,quote:3,activePeople:0})}get people(){return this.$$.ctx[2]}set people(e){this.$$set({people:e}),U()}get quote(){return this.$$.ctx[3]}set quote(e){this.$$set({quote:e}),U()}get activePeople(){return this.$$.ctx[0]}set activePeople(e){this.$$set({activePeople:e}),U()}}function xe(s){let e,l="You have reached the end",t,i,a="Return home";return{c(){e=b("h2"),e.textContent=l,t=E(),i=b("a"),i.textContent=a,this.h()},l(o){e=k(o,"H2",{"data-svelte-h":!0}),j(e)!=="svelte-mq16uh"&&(e.textContent=l),t=w(o),i=k(o,"A",{href:!0,"data-svelte-h":!0}),j(i)!=="svelte-901p0i"&&(i.textContent=a),this.h()},h(){m(i,"href","/")},m(o,d){I(o,e,d),I(o,t,d),I(o,i,d)},p:V,i:V,o:V,d(o){o&&(v(e),v(t),v(i))}}}function Pe(s){let e,l,t,i=s[0].quote.full_quote+"",a,o,d,r,n,c,f="Categories",p,g,x,h,u,D="People",F,P,R,N,$,te="Save and continue",S,Y,le,_e={categories:s[0].categories,quote:s[0].quote};g=new qe({props:_e}),s[4](g);let me={people:s[0].people,quote:s[0].quote};return P=new we({props:me}),s[5](P),{c(){e=b("div"),l=b("div"),t=b("h2"),a=M(i),o=E(),d=b("div"),r=b("div"),n=b("div"),c=b("h3"),c.textContent=f,p=E(),ne(g.$$.fragment),x=E(),h=b("div"),u=b("h3"),u.textContent=D,F=E(),ne(P.$$.fragment),R=E(),N=b("div"),$=b("button"),$.textContent=te,this.h()},l(C){e=k(C,"DIV",{class:!0});var q=y(e);l=k(q,"DIV",{class:!0});var T=y(l);t=k(T,"H2",{class:!0});var A=y(t);a=Q(A,i),A.forEach(v),T.forEach(v),o=w(q),d=k(q,"DIV",{class:!0});var ie=y(d);r=k(ie,"DIV",{class:!0});var G=y(r);n=k(G,"DIV",{class:!0});var H=y(n);c=k(H,"H3",{class:!0,"data-svelte-h":!0}),j(c)!=="svelte-8yfi6a"&&(c.textContent=f),p=w(H),se(g.$$.fragment,H),H.forEach(v),x=w(G),h=k(G,"DIV",{class:!0});var B=y(h);u=k(B,"H3",{class:!0,"data-svelte-h":!0}),j(u)!=="svelte-zs1i4z"&&(u.textContent=D),F=w(B),se(P.$$.fragment,B),B.forEach(v),G.forEach(v),ie.forEach(v),R=w(q),N=k(q,"DIV",{class:!0});var oe=y(N);$=k(oe,"BUTTON",{class:!0,"data-svelte-h":!0}),j($)!=="svelte-t5km0p"&&($.textContent=te),oe.forEach(v),q.forEach(v),this.h()},h(){m(t,"class","text-2xl"),m(l,"class","text-center"),m(c,"class","text-lg mb-2"),m(n,"class","rounded-lg border-2 border-slate-300 px-4 pb-3 pt-2 h-auto w-full md:w-1/2 lg:w-2/5 xl:w-1/3 ml-0 sm:mr-10 mb-5 sm:mb-0"),m(u,"class","text-lg mb-2"),m(h,"class","rounded-lg border-2 border-slate-300 px-4 pb-3 pt-2 h-auto w-full md:w-1/2 lg:w-2/5 xl:w-1/3 ml-0 sm:ml-10"),m(r,"class","flex flex-col sm:flex-row flex-grow sm:flex-grow-0 justify-center px-10 sm:px-0 sm:w-2/3 xl:w-1/2"),m(d,"class","flex justify-center mt-10"),m($,"class","w-max text-lg rounded-md bg-emerald-800 hover:bg-emerald-600 py-2 px-4 transition-colors ease-in duration-75"),m(N,"class","flex justify-center mt-10"),m(e,"class","flex flex-col justify-center mt-10")},m(C,q){I(C,e,q),_(e,l),_(l,t),_(t,a),_(e,o),_(e,d),_(d,r),_(r,n),_(n,c),_(n,p),re(g,n,null),_(r,x),_(r,h),_(h,u),_(h,F),re(P,h,null),_(e,R),_(e,N),_(N,$),S=!0,Y||(le=W($,"click",s[3]),Y=!0)},p(C,q){(!S||q&1)&&i!==(i=C[0].quote.full_quote+"")&&X(a,i);const T={};q&1&&(T.categories=C[0].categories),q&1&&(T.quote=C[0].quote),g.$set(T);const A={};q&1&&(A.people=C[0].people),q&1&&(A.quote=C[0].quote),P.$set(A)},i(C){S||(z(g.$$.fragment,C),z(P.$$.fragment,C),S=!0)},o(C){O(g.$$.fragment,C),O(P.$$.fragment,C),S=!1},d(C){C&&v(e),s[4](null),ce(g),s[5](null),ce(P),Y=!1,le()}}}function Ie(s){let e,l,t,i;const a=[Pe,xe],o=[];function d(r,n){return r[0].quote?0:1}return e=d(s),l=o[e]=a[e](s),{c(){l.c(),t=L()},l(r){l.l(r),t=L()},m(r,n){o[e].m(r,n),I(r,t,n),i=!0},p(r,[n]){let c=e;e=d(r),e===c?o[e].p(r,n):(ve(),O(o[c],1,1,()=>{o[c]=null}),ge(),l=o[e],l?l.p(r,n):(l=o[e]=a[e](r),l.c()),z(l,1),l.m(t.parentNode,t))},i(r){i||(z(l),i=!0)},o(r){O(l),i=!1},d(r){r&&v(t),o[e].d(r)}}}function De(s,e,l){let{data:t}=e,i,a;async function o(){await fetch(`../api/quotes/clear/categories/${t.quote.id}`,{method:"DELETE"})}async function d(){await fetch(`../api/quotes/clear/people/${t.quote.id}`,{method:"DELETE"})}async function r(){await o(),i.activeCategories.forEach(async p=>{p.active==!0&&await fetch("../api/quotes/assign/category",{method:"PUT",body:JSON.stringify({quote_id:t.quote.id,category_id:p.id})})}),await d(),a.activePeople.forEach(async p=>{p.active==!0&&await fetch("../api/quotes/assign/person",{method:"PUT",body:JSON.stringify({quote_id:t.quote.id,person_id:p.id})})});const f=`./${t.nextIndex}`;be(f)}function n(f){ae[f?"unshift":"push"](()=>{i=f,l(1,i)})}function c(f){ae[f?"unshift":"push"](()=>{a=f,l(2,a)})}return s.$$set=f=>{"data"in f&&l(0,t=f.data)},[t,i,a,r,n,c]}class Ae extends Z{constructor(e){super(),ee(this,e,De,Ie,K,{data:0})}}export{Ae as component};
