import{n as P,L as re,M as K,N as ue,s as fe,u as ke,e as E,c as B,b as M,f as w,l as S,i as L,v as Se,w as Ce,x as we,t as I,a as N,d as R,g as O,m as ce,h as C,j as V,E as W,B as H,o as Q,y as F}from"../chunks/scheduler.256b6e1f.js";import{n as Ee,l as Be,f as Le,h as Me,S as de,i as _e,t as j,b as D,c as X,a as Y,m as Z,e as x,g as he,d as pe,j as J,k as ge}from"../chunks/index.6f54c819.js";import{e as A,u as me,f as ve}from"../chunks/each.fb95c91e.js";import{g as qe}from"../chunks/navigation.c4a97ad3.js";function ye(i,e,t,l){if(!e)return P;const s=i.getBoundingClientRect();if(e.left===s.left&&e.right===s.right&&e.top===s.top&&e.bottom===s.bottom)return P;const{delay:o=0,duration:u=300,easing:r=re,start:c=Ee()+o,end:n=c+u,tick:f=P,css:v}=t(i,{from:e,to:s},l);let h=!0,p=!1,_;function g(){v&&(_=Le(i,0,1,u,o,r,v)),o||(p=!0)}function k(){v&&Me(i,_),h=!1}return Be(m=>{if(!p&&m>=c&&(p=!0),p&&m>=n&&(f(1,0),k()),!h)return!1;if(p){const a=m-c,d=0+1*r(a/u);f(d,1-d)}return!0}),g(),f(0,1),k}function $e(i){const e=getComputedStyle(i);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,s=i.getBoundingClientRect();i.style.position="absolute",i.style.width=t,i.style.height=l,z(i,s)}}function z(i,e){const t=i.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(i),s=l.transform==="none"?"":l.transform;i.style.transform=`${s} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}function G(i){const e=i-1;return e*e*e+1}function Ie(i,{delay:e=0,duration:t=400,easing:l=re}={}){const s=+getComputedStyle(i).opacity;return{delay:e,duration:t,easing:l,css:o=>`opacity: ${o*s}`}}function Re(i,{delay:e=0,duration:t=400,easing:l=G,start:s=0,opacity:o=0}={}){const u=getComputedStyle(i),r=+u.opacity,c=u.transform==="none"?"":u.transform,n=1-s,f=r*(1-o);return{delay:e,duration:t,easing:l,css:(v,h)=>`
			transform: ${c} scale(${1-n*h});
			opacity: ${r-f*h}
		`}}function Te({fallback:i,...e}){const t=new Map,l=new Map;function s(u,r,c){const{delay:n=0,duration:f=$=>Math.sqrt($)*30,easing:v=G}=K(K({},e),c),h=u.getBoundingClientRect(),p=r.getBoundingClientRect(),_=h.left-p.left,g=h.top-p.top,k=h.width/p.width,m=h.height/p.height,a=Math.sqrt(_*_+g*g),d=getComputedStyle(r),b=d.transform==="none"?"":d.transform,q=+d.opacity;return{delay:n,duration:ue(f)?f(a):f,easing:v,css:($,y)=>`
				opacity: ${$*q};
				transform-origin: top left;
				transform: ${b} translate(${y*_}px,${y*g}px) scale(${$+(1-$)*k}, ${$+(1-$)*m});
			`}}function o(u,r,c){return(n,f)=>(u.set(f.key,n),()=>{if(r.has(f.key)){const v=r.get(f.key);return r.delete(f.key),s(v,n,f)}return u.delete(f.key),i&&i(n,f,c)})}return[o(l,t,!1),o(t,l,!0)]}function be(i,{from:e,to:t},l={}){const s=getComputedStyle(i),o=s.transform==="none"?"":s.transform,[u,r]=s.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*u/t.width-(t.left+u),n=e.top+e.height*r/t.height-(t.top+r),{delay:f=0,duration:v=p=>Math.sqrt(p)*120,easing:h=G}=l;return{delay:f,duration:ue(v)?v(Math.sqrt(c*c+n*n)):v,easing:h,css:(p,_)=>{const g=_*c,k=_*n,m=p+_*e.width/t.width,a=p+_*e.height/t.height;return`transform: ${o} translate(${g}px, ${k}px) scale(${m}, ${a});`}}}function Ne(i){let e,t;const l=i[1].default,s=ke(l,i,i[0],null);return{c(){e=E("div"),s&&s.c(),this.h()},l(o){e=B(o,"DIV",{class:!0});var u=M(e);s&&s.l(u),u.forEach(w),this.h()},h(){S(e,"class","w-full sm:w-2/3 lg:w-1/3 m-2 text-center bg-slate-700 border-emerald-600 border-2 rounded-md p-2")},m(o,u){L(o,e,u),s&&s.m(e,null),t=!0},p(o,[u]){s&&s.p&&(!t||u&1)&&Se(s,l,o,o[0],t?we(l,o[0],u,null):Ce(o[0]),null)},i(o){t||(j(s,o),t=!0)},o(o){D(s,o),t=!1},d(o){o&&w(e),s&&s.d(o)}}}function Oe(i,e,t){let{$$slots:l={},$$scope:s}=e;return i.$$set=o=>{"$$scope"in o&&t(0,s=o.$$scope)},[s,l]}class ee extends de{constructor(e){super(),_e(this,e,Oe,Ne,fe,{})}}function te(i,e,t){const l=i.slice();return l[9]=e[t],l[10]=e,l[11]=t,l}function le(i,e,t){const l=i.slice();return l[9]=e[t],l[12]=e,l[13]=t,l}function ne(i,e){let t,l,s,o,u,r,c,n,f=e[9].content+"",v,h,p,_,g,k,m=P,a,d,b;function q(){e[7].call(l,e[12],e[13])}return{key:i,first:null,c(){t=E("li"),l=E("input"),c=N(),n=E("label"),v=I(f),p=N(),this.h()},l($){t=B($,"LI",{class:!0});var y=M(t);l=B(y,"INPUT",{type:!0,id:!0,name:!0}),c=O(y),n=B(y,"LABEL",{for:!0});var U=M(n);v=R(U,f),U.forEach(w),p=O(y),y.forEach(w),this.h()},h(){S(l,"type","checkbox"),S(l,"id",s=e[9].id),l.__value=o=e[9].id,H(l,l.__value),S(l,"name",u=e[9].id),l.disabled=r=e[2].length>=T&&!e[2].includes(e[9]),S(n,"for",h=e[9].id),S(t,"class","text-left"),this.first=t},m($,y){L($,t,y),C(t,l),l.checked=e[9].isSelected,C(t,c),C(t,n),C(n,v),C(t,p),a=!0,d||(b=Q(l,"change",q),d=!0)},p($,y){e=$,(!a||y&2&&s!==(s=e[9].id))&&S(l,"id",s),(!a||y&2&&o!==(o=e[9].id))&&(l.__value=o,H(l,l.__value)),(!a||y&2&&u!==(u=e[9].id))&&S(l,"name",u),(!a||y&6&&r!==(r=e[2].length>=T&&!e[2].includes(e[9])))&&(l.disabled=r),y&2&&(l.checked=e[9].isSelected),(!a||y&2)&&f!==(f=e[9].content+"")&&V(v,f),(!a||y&2&&h!==(h=e[9].id))&&S(n,"for",h)},r(){k=t.getBoundingClientRect()},f(){$e(t),m(),z(t,k)},a(){m(),m=ye(t,k,be,{})},i($){a||($&&F(()=>{a&&(g&&g.end(1),_=J(t,e[5],{key:e[9].id}),_.start())}),a=!0)},o($){_&&_.invalidate(),$&&(g=ge(t,e[4],{key:e[9].id})),a=!1},d($){$&&w(t),$&&g&&g.end(),d=!1,b()}}}function ie(i){let e,t="Submit",l,s,o;return{c(){e=E("button"),e.textContent=t,this.h()},l(u){e=B(u,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-npat15"&&(e.textContent=t),this.h()},h(){S(e,"class","mt-2 w-max text-lg rounded-md bg-emerald-700 hover:bg-emerald-600 py-2 px-4 transition-colors ease-in duration-75 disabled:bg-gray-600")},m(u,r){L(u,e,r),s||(o=Q(e,"click",i[6]),s=!0)},p:P,i(u){u&&(l||F(()=>{l=J(e,Re,{duration:200}),l.start()}))},o:P,d(u){u&&w(e),s=!1,o()}}}function je(i){let e,t=i[2].length+"",l,s,o,u,r,c,n,f=[],v=new Map,h,p,_,g=A(i[1].filter(oe));const k=a=>a[9].id;for(let a=0;a<g.length;a+=1){let d=le(i,g,a),b=k(d);v.set(b,f[a]=ne(b,d))}let m=i[2].length===T&&ie(i);return{c(){e=E("p"),l=I(t),s=I(" out of "),o=I(T),u=I(" selected "),r=I(i[3]),c=N(),n=E("ul");for(let a=0;a<f.length;a+=1)f[a].c();h=N(),m&&m.c(),p=W(),this.h()},l(a){e=B(a,"P",{class:!0});var d=M(e);l=R(d,t),s=R(d," out of "),o=R(d,T),u=R(d," selected "),r=R(d,i[3]),d.forEach(w),c=O(a),n=B(a,"UL",{class:!0});var b=M(n);for(let q=0;q<f.length;q+=1)f[q].l(b);b.forEach(w),h=O(a),m&&m.l(a),p=W(),this.h()},h(){S(e,"class","text-xl"),S(n,"class","text-lg my-2")},m(a,d){L(a,e,d),C(e,l),C(e,s),C(e,o),C(e,u),C(e,r),L(a,c,d),L(a,n,d);for(let b=0;b<f.length;b+=1)f[b]&&f[b].m(n,null);L(a,h,d),m&&m.m(a,d),L(a,p,d),_=!0},p(a,d){if((!_||d&4)&&t!==(t=a[2].length+"")&&V(l,t),(!_||d&8)&&V(r,a[3]),d&6){g=A(a[1].filter(oe)),he();for(let b=0;b<f.length;b+=1)f[b].r();f=me(f,d,k,1,a,g,v,n,ve,ne,null,le);for(let b=0;b<f.length;b+=1)f[b].a();pe()}a[2].length===T?m?(m.p(a,d),d&4&&j(m,1)):(m=ie(a),m.c(),j(m,1),m.m(p.parentNode,p)):m&&(m.d(1),m=null)},i(a){if(!_){for(let d=0;d<g.length;d+=1)j(f[d]);j(m),_=!0}},o(a){for(let d=0;d<f.length;d+=1)D(f[d]);_=!1},d(a){a&&(w(e),w(c),w(n),w(h),w(p));for(let d=0;d<f.length;d+=1)f[d].d();m&&m.d(a)}}}function se(i,e){let t,l,s,o,u,r,c,n,f=e[9].content+"",v,h,p,_,g,k,m=P,a,d,b;function q(){e[8].call(l,e[10],e[11])}return{key:i,first:null,c(){t=E("li"),l=E("input"),c=N(),n=E("label"),v=I(f),p=N(),this.h()},l($){t=B($,"LI",{class:!0});var y=M(t);l=B(y,"INPUT",{type:!0,id:!0,name:!0}),c=O(y),n=B(y,"LABEL",{for:!0});var U=M(n);v=R(U,f),U.forEach(w),p=O(y),y.forEach(w),this.h()},h(){S(l,"type","checkbox"),S(l,"id",s=e[9].id),l.__value=o=e[9].id,H(l,l.__value),S(l,"name",u=e[9].id),l.disabled=r=e[2].length>=T&&!e[2].includes(e[9]),S(n,"for",h=e[9].id),S(t,"class","text-left"),this.first=t},m($,y){L($,t,y),C(t,l),l.checked=e[9].isSelected,C(t,c),C(t,n),C(n,v),C(t,p),a=!0,d||(b=Q(l,"change",q),d=!0)},p($,y){e=$,(!a||y&2&&s!==(s=e[9].id))&&S(l,"id",s),(!a||y&2&&o!==(o=e[9].id))&&(l.__value=o,H(l,l.__value)),(!a||y&2&&u!==(u=e[9].id))&&S(l,"name",u),(!a||y&6&&r!==(r=e[2].length>=T&&!e[2].includes(e[9])))&&(l.disabled=r),y&2&&(l.checked=e[9].isSelected),(!a||y&2)&&f!==(f=e[9].content+"")&&V(v,f),(!a||y&2&&h!==(h=e[9].id))&&S(n,"for",h)},r(){k=t.getBoundingClientRect()},f(){$e(t),m(),z(t,k)},a(){m(),m=ye(t,k,be,{})},i($){a||($&&F(()=>{a&&(g&&g.end(1),_=J(t,e[5],{key:e[9].id}),_.start())}),a=!0)},o($){_&&_.invalidate(),$&&(g=ge(t,e[4],{key:e[9].id})),a=!1},d($){$&&w(t),$&&g&&g.end(),d=!1,b()}}}function Pe(i){let e,t=[],l=new Map,s,o=A(i[1].filter(ae));const u=r=>r[9].id;for(let r=0;r<o.length;r+=1){let c=te(i,o,r),n=u(c);l.set(n,t[r]=se(n,c))}return{c(){e=E("ul");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=B(r,"UL",{class:!0});var c=M(e);for(let n=0;n<t.length;n+=1)t[n].l(c);c.forEach(w),this.h()},h(){S(e,"class","text-lg")},m(r,c){L(r,e,c);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null);s=!0},p(r,c){if(c&6){o=A(r[1].filter(ae)),he();for(let n=0;n<t.length;n+=1)t[n].r();t=me(t,c,u,1,r,o,l,e,ve,se,null,te);for(let n=0;n<t.length;n+=1)t[n].a();pe()}},i(r){if(!s){for(let c=0;c<o.length;c+=1)j(t[c]);s=!0}},o(r){for(let c=0;c<t.length;c+=1)D(t[c]);s=!1},d(r){r&&w(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function Ue(i){let e,t,l,s=i[0].category.name+"",o,u,r,c,n,f,v,h='<a href="/vote" class="text-emerald-600 hover:underline">Cancel and return</a>',p;return r=new ee({props:{$$slots:{default:[je]},$$scope:{ctx:i}}}),n=new ee({props:{$$slots:{default:[Pe]},$$scope:{ctx:i}}}),{c(){e=E("div"),t=E("h1"),l=I("Voting for: "),o=I(s),u=N(),X(r.$$.fragment),c=N(),X(n.$$.fragment),f=N(),v=E("div"),v.innerHTML=h,this.h()},l(_){e=B(_,"DIV",{class:!0});var g=M(e);t=B(g,"H1",{class:!0});var k=M(t);l=R(k,"Voting for: "),o=R(k,s),k.forEach(w),u=O(g),Y(r.$$.fragment,g),c=O(g),Y(n.$$.fragment,g),f=O(g),v=B(g,"DIV",{"data-svelte-h":!0}),ce(v)!=="svelte-10j05a9"&&(v.innerHTML=h),g.forEach(w),this.h()},h(){S(t,"class","text-2xl"),S(e,"class","flex flex-col items-center")},m(_,g){L(_,e,g),C(e,t),C(t,l),C(t,o),C(e,u),Z(r,e,null),C(e,c),Z(n,e,null),C(e,f),C(e,v),p=!0},p(_,[g]){(!p||g&1)&&s!==(s=_[0].category.name+"")&&V(o,s);const k={};g&16398&&(k.$$scope={dirty:g,ctx:_}),r.$set(k);const m={};g&16390&&(m.$$scope={dirty:g,ctx:_}),n.$set(m)},i(_){p||(j(r.$$.fragment,_),j(n.$$.fragment,_),p=!0)},o(_){D(r.$$.fragment,_),D(n.$$.fragment,_),p=!1},d(_){_&&w(e),x(r),x(n)}}}const T=3,oe=i=>i.isSelected,ae=i=>!i.isSelected;function Ve(i,e,t){let l,s,{data:o}=e;console.log(o.user);let u=Object.values(o.quotes);u.forEach(h=>h.isSelected=!1);const[r,c]=Te({fallback:Ie});async function n(h){console.log("Clicked"),l.forEach(async p=>{const _=JSON.stringify({quote_id:p.id,category_id:o.category.id,person_id:o.user.person_id});await fetch("/api/vote",{method:"POST",body:_})}),qe("/vote")}function f(h,p){h[p].isSelected=this.checked,t(1,u)}function v(h,p){h[p].isSelected=this.checked,t(1,u)}return i.$$set=h=>{"data"in h&&t(0,o=h.data)},i.$$.update=()=>{i.$$.dirty&2&&t(2,l=u.filter(h=>h.isSelected==!0)),i.$$.dirty&4&&t(3,s=l.length===T?"✔":"❌")},[o,u,l,s,r,c,n,f,v]}class Fe extends de{constructor(e){super(),_e(this,e,Ve,Ue,fe,{data:0})}}export{Fe as component};
